<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    
    <script src="https://cdn.jsdelivr.net/npm/markdown-it@11.0.0/dist/markdown-it.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>

</head>
<body>

  <script>

    

      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        svg: {
          fontCache: 'global'
        }
      };
  </script>

  <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

  <script>        

      $(document).ready(function() {

          const md = window.markdownit({
            html: true,
            typographer: true,
            linkify: true,
            breaks: true
          });

          $("[name='Question']").on("input", function() {

            var markdown = $(this).val();
            var mk = md.render(markdown);

            $("#a").html(PR.prettyPrintOne(mk));
            MathJax.typeset();
          });
      
      });

    </script>
    
    {% if current_user.is_authenticated %}
    <div>
      {% for question in question %}
          <button data-id="{{ question.id }}" class="update-button">{{ question.Label }}</button>
      {% endfor %}
    </div>
    
    <form method="POST" id="myForm">
        {{ form.hidden_tag()}}

        {{form.bonne_reponse()}}

        <br><br>
        {{form.Label.label()}}
        {{form.Label()}}
        <br><br>
        {{form.Etiquette.label()}}
        {{form.Etiquette}}
        {% for tag in range(0, len9) %}
          <button id = "{{ globalTags[tag] }}" class = "tagButton" type = "button">{{ globalTags[tag] }}</button>
        {% endfor %}
        {% for tag in range(len9+1, len) %}
          <button id = "{{ globalTags[tag] }}" class = "tagButton tagButtonPlus" type = "button" style = 'display: none;'>{{ globalTags[tag] }}</button>
        {% endfor %}
        <button id = "plus" type = "button" class = "plus" style = 'display: block;'>+</button>
        <button id = "moins" type = "button" class = "moins" style = 'display: none;'>-</button>
        <input type="text" id = "addTags" class = "addTags" onkeydown="return (event.keyCode!=13);" placeholder="Séparer par ',' pour plusieurs tags" style = 'display: none';/>
        <button type = "button" id = "submitCustomTags" class = "submitCustomTags" style = 'display: none;'>Ajouter l'étiquette</button> 
        <br><br>
        {{form.Question.label}}
        {{form.Question()}}
        <br><br>
        {{form.Réponse1.label()}}
        {{form.Réponse1()}}
        <br><br>
        {{form.Réponse2.label()}}
        {{form.Réponse2()}}
        <br><br>
        {{form.Réponse3.label()}}
        {{form.Réponse3()}}
        <br><br>
        {{form.Réponse4.label()}}
        {{form.Réponse4()}}
        <br><br>
        {{form.submit()}}    

        <button type="button" id="reset-button">Tout Effacer</button>

        <br>
        <br>

    </form>
   
      <p id="a"></p>
  
    <button id="R1"></button> <input type="radio" id="BonneRéponse1" name="choisirReponse" class="radioReponse">
    <br>
    <button id="R2"></button> <input type="radio" id="BonneRéponse2" name="choisirReponse" class="radioReponse">
    <br>
    <button id="R3"></button> <input type="radio" id="BonneRéponse3" name="choisirReponse" class="radioReponse">
    <br>
    <button id="R4"></button> <input type="radio" id="BonneRéponse4" name="choisirReponse" class="radioReponse">
    <br>
    <br>
    
    <div id="pageQuestions">
      <br>
    <br>

    </div>
    <br><br>
    <button id="envoyerPageQuestions">Créer une nouvelle page de questions</button>
    <br><br>

    <a href="{{url_for('deconnexion')}}">Déconnexion</a>

    {% else %}
    <p>Il faut être connecté pour accéder au créateur de questions !</p>
    <a href="{{url_for('connexion')}}">Connexion</a>
    {% endif %}


    
</body>
</html>
